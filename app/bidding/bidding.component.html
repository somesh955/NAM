
<section class="content-section">
	<div class="container" >
		<div class="container">
      <form>
        <div class="panel panel-info">
          <div class="panel-heading">
            <div class="row panel-wrap">
              <div class="col-md-12 col-sm-12 col-xs-12 mar-top-15 ">
                <div class="row">
                 <div class="" ng-if="stateStatus==null">
                  <div class="col-md-3 col-sm-6 col-xs-12 ">
                    <div class="row form-group">
                     <div class="col-md-4 col-sm-4 col-xs-12 "><label>State </label></div>
                     <div class="col-md-7 col-sm-8 col-xs-12 ">


                       <select class="form-control" ng-model="bid.state" ng-change="getApmcList(bid.state)" ng-options="state.stateId as state.stateName for state in stateList">
                         <option value="">Select</option>
                       </select>
                     </div>
                   </div>						
                 </div>
               </div>
               <div class="col-md-3 col-sm-6 col-xs-12 ">
                 <div class="row form-group">
                   <div class="col-md-4 col-sm-4 col-xs-12 "><label>APMC </label></div>
                   <div class="col-md-7 col-sm-8 col-xs-12 ">
                    <select class="form-control" ng-model="bid.txnOprId" ng-change="getList(bid.apmc)" data-ng-options="apmc.apmcId as apmc.apmcName for apmc in ammcList">
                     <option value="">All</option>
                   </select>
                 </div>

               </div>
             </div>
             <div class="col-md-3 col-sm-6 col-xs-12 ">
              <div class="row form-group">
                <div class="col-md-4 col-sm-4 col-xs-12 "> <label>Agent </label></div>
                <div class="col-md-7 col-sm-8 col-xs-12 ">			

                 <select class="form-control" ng-model="bid.caId" data-ng-options="agent.caId as agent.caName for agent in catList">
                   <option value="">All</option>
                 </select>

               </div>
             </div>
           </div>
           <div class="col-md-3 col-sm-6 col-xs-12 ">
            <div class="row form-group">
              <div class="col-md-4 col-sm-4 col-xs-12 "><label>Commodity </label></div>
              <div class="col-md-7 col-sm-8 col-xs-12 ">

                <select class="form-control" ng-model="bid.commodityId" data-ng-options="commodity.commidityId as commodity.commidityName for commodity in commodityList">
                  <option value="">All</option>
                </select>
              </div>
            </div>
          </div>
          <div class="col-md-3 col-sm-6 col-xs-12">
            <div class="row form-group">
              <div class="col-md-4 col-sm-4 col-xs-12 "><label>Lot Code </label></div>
              <div class="col-md-7 col-sm-8 col-xs-12 ">
                <input type="text" ng-model="bid.lotCode" class="form-control"/>
              </div>
            </div>
          </div>
          <div class="col-md-3 col-sm-6 col-xs-12 saller">
            <div class="row form-group">
              <div class="col-md-4 col-sm-4 col-xs-12 saller "><label>Seller </label></div>
              <div class="col-md-7 col-sm-8 col-xs-12 ">
                <input type="text" ng-model="bid.seller" class="form-control"/>
              </div>
            </div>
          </div>
          <div class="col-md-3 col-sm-6 col-xs-12 ">
           <div class="row form-group">
            <div class="col-md-4 col-sm-4 col-xs-12 "><label>Village</label> </div>
            <div class="col-md-7 col-sm-8 col-xs-12 ">
             <input type="text" ng-model="bid.village" class="form-control"/>  
           </div>
         </div>
       </div>
       <div class="col-md-3 col-sm-6 col-xs-12 text-center">
         <div class="row form-group">

          <button type="button" class="btn btn-primary btn-refresh" ng-click="getbidGridList(bid)"
          aria-label="Left Align" data-toggle="tooltip"
          data-placement="left" title="Refresh">
          Refresh
        </button>

      </div>
    </div>
  </div>
</div>
           <!--<div class="col-md-2 col-sm-12 col-xs-12 bit-search ">
		      
         </div>-->
       </div>
     </div></div></div>
     <div class="row panel-wrap-grid">
      <div class="panel panel-default">
        <div class="panel-heading ">
          <h3 class="panel-title panel-bid">My Preferred Bids - {{bidingGrid.length}} </h3>
        </div>
        <div class=" row panel-submit">
          <input type="button" value="Submit All" class="btn btn-primary" ng-click="open('md','myModalContent.html')">
        </div>
		 <!--  <div class=" row panel-submit">
			  <input ng-click="confirmBidSubmission(bidingGrid)" type="button" value="Submit All" class="btn btn-primary">
		  
      </div> -->
      <div class="panel-body panel-cont">            
        <!-- PAGE CONTENT BEGINS -->
        <div class="row ">
         <div class="bid-listing bid-listing-cont" id="">
          <div class="col-xs-12 col-sm-12 " id="">
            <div class="table-horizaontal table-horizaontal-bid table-vertical">
              <div id="list-wrapper">
                <div class="list" infinite-scroll='getbidGridList(bid)' 
                infinite-scroll-distance='2' 
                infinite-scroll-container="'#list-wrapper'">
                <div class="list-table" >
                  <table class="table table-striped table-bordered table-hover" id="list-wrapper">
                    <thead class="thin-border-bottom">
                      <tr >
                        <!--   <th>APMC </th> -->
                        <th>Commodity</th>
                        <th>Lot code</th>
                        <th>Agent</th>
                        <th>No.of<br>Bags</th>
                        <th>QTY</th>
                        <th>Mind Bid</th>
                        <th>Last Bid</th>
                        <th>My Bid</th>
                        <th>Time<br>Remaing<br>(HH:MM)</th>
                        <th>New Bid</th>
                        <th>Bid</th>
                        <th>Certificate</th>
                        <th>seller</th>
                        <th>Village</th>
                        <th>Test Result</th>
                                <!-- <th>Start Date</th>
                                <th>End Date</th>
                                <th>Re-Bid<br>Allowed</th>
                                <th>Extended Date</th> -->
                              </tr>                                  
                            </thead>

                            <tbody >
                              <tr  ng-repeat="bidValue in bidingGrid">
                                <!-- <td><span class="span-hd span-bid-left">APMC </span><span class="span-bid-right">{{bidValue.oprName}}</span></td> -->
                                
                                <td nowrap><span class="span-hd span-bid-left">Commodity </span><span class="span-bid-right">{{bidValue.productName}}</span></td>
                                
                                <td nowrap><span class="span-hd span-bid-left">Lot code </span><span class="span-bid-right">{{bidValue.lotCode}}</span></td>
                                
                                <td nowrap><span class="span-hd span-bid-left">Agent </span><span class="span-bid-right">{{bidValue.commissionAgent}}</span></td>
                                
                                <td><span class="span-hd span-bid-left">No of Bags </span><span class="span-bid-right">{{bidValue.noOfBag}}</span></td>
                                
                                <td><span class="span-hd span-bid-left">Commodity Uom Qty </span><span class="span-bid-right">{{bidValue.wbWeight}}</span></td>
                                
                                <td><span class="span-hd span-bid-left">Mind Bid</span><span class="span-bid-right">{{bidValue.mspBidRate}}</span></td>
                                
                                <td><span class="span-hd span-bid-left">Last Bid</span><span class="span-bid-right">{{bidValue.maxOpenBidVal}}</span></td>
                                
                                <td><span class="span-hd span-bid-left">My Bid</span><span class="span-bid-right">{{bidValue.lastBidVal}}</span></td>
                                
                                <td><span class="span-hd span-bid-left">Time Remaing(HH:MI)</span> <span class="span-bid-right">{{dateDifference(bidValue.endDate)}}</span></td>
                                
                                <td><span class="span-hd span-bid-left">New Bid </span><span  class="span-bid-right"><input type="text" ng-model="bidValue.bidRate" class="form-control bidW"  ng-blur="postMultiBid(bidValue)"/> </span> </td>
                                
                                <td><span class="span-hd span-bid-left">Bid </span><span  class="span-bid-right"><button class="btn btn-deafult" type="button" ng-click="bidSubmission(bidValue)" >Bid</button></span></td>
                                
                                <td><span class="span-hd span-bid-left">Certificate </span><span class="span-bid-right"><button class="btn btn-deafult" type="button">Show</button></span></td>

                                <td nowrap><span class="span-hd span-bid-left">seller </span><span class="span-bid-right">{{bidValue.seller}}</span></td>
                                
                                <td><span class="span-hd span-bid-left">Village </span><span>{{bidValue.village}}</span></td>
                                
                                <td><span class="span-hd span-bid-left">Test Result </span><span class="span-bid-right"><button class="btn btn-deafult" type="button">Show</button></span></td>
                                
                               <!--  <td><span class="span-hd span-bid-left">Start Date </span><span class="span-bid-right">{{bidValue.startDate}}</span></td>
                                
                                <td><span class="span-hd span-bid-left">End Date </span><span class="span-bid-right">{{bidValue.endDate}}</span></td>
                                
                                <td><span class="span-hd span-bid-left">Re-Bd Allowed </span><span class="span-bid-right">{{bidValue.submitMultiBid}}</span></td>
                                
                                <td><span class="span-hd span-bid-left">Extended Date </span><span class="span-bid-right">{{bidValue.extendedEndTime}}</span></td>
                              -->
                            </tr>
                          </tbody>
                        </table>
                      </div>
                      <div style='clear: both;'></div>
                    </div>
                  </div>                      
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>     
    </div> 

    <script type="text/ng-template" id="myModalContent.html">
      <div class="modal-header">
        <h3 class="modal-title"></h3>
      </div>
      <div class="modal-body">
        <table>
         <tr>
          <th>Sr No.</th>
          <th>Lot Code</th>
          <th>Commodity</th>
          <th>Bid Rate</th>
        </tr>
        <tr ng-repeat="bid in bidList track by bid.lotId">
          <td>{{$index+1}}</td>
          <td>{{bid.lotCode}}</td>
          <td>{{bid.productName}}</td>
          <td><input type="text" ng-model="bid.bidRate" class="form-control bidW" /></td>
        </tr>
      </table>
    </div>
    <div class="modal-footer">
      <button class="btn btn-primary" type="button" ng-click="save(bidList)">OK</button>
      <button class="btn btn-warning" type="button" ng-click="cancel()">Cancel</button>
    </div>
  </script>
  <script type="text/ng-template" id="SuccessContent.html">
    <div class="modal-header">
      <h3 class="modal-title"></h3>
    </div>
    <div class="modal-body">
      <table>
       <tr>
        <th>Sr No.</th>
        <th>Bid Id</th>
        <th>Bid Status</th>
        <th>Bid Transcation</th>
      </tr>
      <tr ng-repeat="success in succesList">
        <td>{{$index+1}}</td>
        <td>{{success.bidId}}</td>
        <td>{{(success.bidStatusMsg === 'S' ? 'Success' : 'failure')}}</td>
        <td>{{success.bidTxnId}}</td>
      </tr>
    </table>
  </div>
  <div class="modal-footer">
    <button class="btn btn-warning" type="button" ng-click="cancel()">Cancel</button>
  </div>
</script>
</section>

